import bpp.*;

Filter a = new PlaceboFilter("a");
Filter b = new PlaceboFilter("b");
Filter c = new PlaceboFilter("c");
Filter ab = new ComposedFilter(a,b);
Filter abc = new ComposedFilter(ab,c);
StringWriter test = new StringWriter();
PrintWriter pw = new PrintWriter(test);

pw.println("this");
pw.println("is");
pw.println("a");
pw.println("test");
pw.println("");
pw.println(".");

String output;

for (int testcount=0; testcount < 1000; ++testcount) {
  BufferedReader in = new BufferedReader(new StringReader(test.getBuffer().toString()));
  StringWriter sout = new StringWriter();
  PrintWriter out = new PrintWriter(sout);

  abc.filter(in,out);

  if (output != null) {
    if (!output.equals(sout.getBuffer().toString())) {
      print("outputs do not match.");
    }
  } else {
    output = sout.getBuffer().toString();
  }
}

print("output:");
print(output);
print("done.");
